# Дизайн-гайд для api-settings и гайд по функциональности.

Это боковой эллемент Drawer который позволяет управлять настройками api для llm моделей.

## Интерфейс, общее описание без специфики работы по провайдерам.

1. Блок "Глобальный пресет".

- Заголовок "Глобальный пресет"
- Селект с выбором пресета. кнопка создания новго персета, кнопка сохранение пресета, кнопка переименования, кнопка дублирования, кнопка удалениея.

2. Блок "Основная модель"

- селект с выбором пресета, кнопка создания новго персета, кнопка сохранение пресета, кнопка переименования, кнопка дублирования, кнопка удалениея.
- селект с выбором провайдера апи (Ollama, OpenRouter, OpenAi совместимое апи)
- селект с выбором названия модели
- селект с выбором токена. кнопка с ключом которая откроет модалку управления токенами.
- Ниже два чекбокса, активны только при условии что у юзера есть более 1го токена. 1й чекбокс - случайный токен. 2й чекбокс - фоллбек (то есть использовать другой токен если запрос на выбранном токене пришел с ошибкой апи). добавить пояснение через тултип и иконку (i). При нажатии на чекбокс "случайный токен" блокируется селект с выбором токена.
- коллапс с основными настройками семлеров модели, чекбокс который включает параметры юзера. текстареа с кастомными параметрами семлеров (ввод json), текстареа для настройки хэдеров (json)

3. Блок "RAG модель" (все аналогично блоку 2, но это поле работает только если нажать чекбокс)

4. Блок "Guard модель" (аналогично Блок "RAG модель")

5. Блок "Storytalling модель" (аналогично Блок "RAG модель")

6. Блок "Эмбединг".

- Выбор провайдера (Ollama, Openrouter)
- Селект с названием модели
- Селект с выбором токена
- Специфичные поля для настройки эмбедингов.

7. Модальное окно "Управление токенами".

- Заголовок + принадлежность к провайдеру
- Блок с добавлением нового токена. Инпут с названием, инпут с токеном
- Список сохранненых токенов в виде блоков в столбик. Название, токен (sk-123\*\*\*xyz). две кнопки, переименовть, удалить.
- При нажатии на кнопку переименовть открывается модалка с изменением имени токена.

## Специфика и уточнение логики работы.

1. Глобальный пресет хранит настройки всех полей и пре переключении пресета автоматически применяет все настройки ко всем "Блокам". При переключении делает проверку на изменение полей, если что-то было изменено и не сохранено, будет модалка алерт с предупреждением о несохраненных данных и кнопками: отменить, переключить.

2. Каждый блок кроме глобального пресета можно свернуть. Если "Блок" не включен, то возможности свернуть блок нет, потому что он и так свернут.

3. Провайдеры "Ollama" и "OpenAi совместимое апи" могут не предоставлять список моделей и могут требовать ввод кастомного урла, по этому нужно добавить новые инпуты. Так же токен может быть опциональным. Предусмотреть эти варианты за ранее. Под каждого провайдера нужно сделать уникальный "Блок" со своими уникальными настройками, что бы избежать аффекта на других провайдеров. Сейчас бекенд предопологает что "провайдер" может использоваться как эмбединг и как ллм модель. Ollama - на данный момент используется только как эмбединг, он не предоставляет работу апи для llm.

4. Токены сохраняются только для выбранных провайдеров и могут использоваться в любых "Блоках моделей", то есть созданные токены для OpenRouter могут использоваться только для OpenRouter и так далее.
